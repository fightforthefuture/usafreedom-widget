function stupidIEZoomFix(){ieVersion?($(".loading-region").addClass("zoomedOut").addClass("IE"),$("#modal").addClass("fullyVisible").addClass("IE")):($(".loading-region").addClass("zoomedOut").addClass("notIE"),$("#modal").addClass("fullyVisible").addClass("notIE"))}var animations={modal:{options:{debug:!1,skipEmailSignup:!1,skipCallTool:!1,fastAnimation:!1,boxUnchecked:!1,org:null},phoneCallAllowed:!0,zipcode:null,default_org:"fftf",init:function(a){for(var b in a)this.options[b]=a[b];return this},start:function(){this.options.skipEmailSignup&&($("#direct_call").show(),$("#petition").hide(),$(".bottom-link").hide(),$(".bottom-link").hide(),$("#last-donation-ask").hide()),this.options.skipCallTool&&(this.phoneCallAllowed=!1),this.options.boxUnchecked&&($("#opt-in").attr("checked",!1),$(".disclosure").removeClass("nice-check")),setTimeout(stupidIEZoomFix,150),this.optimizelyTextAB(),this.options.org?"fftf"==this.options.org&&($("#fftf_disclosure").hide(),$("#fftf_org_disclosure").show()):this.options.org="fftf",$("a.close").click(function(a){a.preventDefault(),$("body").addClass("closed"),trackLeaderboardStat({stat:"close_widget",data:"modal"}),setTimeout(function(){sendMessage("stop")},750)}),$("a.letter").click(function(a){a.preventDefault(),$("#overlay").css("display","block"),setTimeout(function(){$("#overlay").addClass("visible")},50)}),$("a.continue").click(function(a){$("#overlay").removeClass("visible"),setTimeout(function(){$("#overlay").css("display","none")},750)}),$("a#cantcall").click(function(a){a.preventDefault(),this.showFinal()}.bind(this)),$("form[name=petition]").submit(function(a){a.preventDefault(),this.postUser($(this))&&($("input:not([type=image],[type=button],[type=submit])").val(""),this.phoneCallAllowed?this.showPhoneCall():this.showFinal())}.bind(this)),$("form[name=direct_call]").submit(function(a){a.preventDefault();var b=this.validatePhone($("#phone_front").val());b?(this.placePhonecall(b),this.showFinalWithCallInstructions()):$("#phone_front").addClass("error")}.bind(this)),$("a.facebook").click(function(a){trackLeaderboardStat({stat:"share",data:"facebook"})}),$("a.twitter").click(function(a){a.preventDefault(),trackLeaderboardStat({stat:"share",data:"twitter"});var b=encodeURIComponent(TWEET_TEXT);window.open("https://twitter.com/intent/tweet?text="+b)}),$("#call").click(function(a){a.preventDefault();var b=this.validatePhone($("#phone").val());return b?($("#call").attr("disabled",!0),$("#phone").attr("disabled",!0),this.placePhonecall(b),void setTimeout(function(){this.showFinalWithCallInstructions()}.bind(this),1e3)):$("#phone").addClass("error")}.bind(this)),$.ajax({url:"//fftf-geocoder.herokuapp.com/",dataType:"json",type:"get",success:function(a){a.country&&a.country.iso_code&&($("#country").val(a.country.iso_code),"US"!=a.country.iso_code&&(this.phoneCallAllowed=!1,this.options.skipEmailSignup&&sendMessage("stop")))}.bind(this)})},log:function(){this.options.debug&&console.log.apply(console,arguments)},postUser:function(){var a={},b=!1,c=function(a){$(a).addClass("error"),b=!0};if(""===$("#street_address").val()&&c($("#street_address")),""===$("#email").val()&&c($("#email")),""===$("#first_name").val()&&c($("#first_name")),""===$("#zip").val()&&c($("#zip")),b)return alert("Please enter your info so we can sign the letter.");this.zipcode=$("#zip").val();var d=/^\d{5}$/;d.test(this.zipcode)||(this.phoneCallAllowed=!1);var e=$(".letter .content")[0].textContent.trim()+"\n";return a.guard="",a["member[first_name]"]=$("#first_name").val(),a["member[email]"]=$("#email").val(),a["member[street_address]"]=$("#street_address").val(),a["member[postcode]"]=$("#zip").val(),a.hp_enabled=!0,a.tag="ifeelnaked",a.subject="Please oppose the USA FREEDOM Act and end mass surveillance.",a.action_comment=e,a["member[country]"]=$("#country").val(),0==$("#opt-in").is(":checked")&&(a.opt_out=!0),this.options.org?a.org=this.options.org:a.org=this.default_org,console.log("doc: ",a),$.ajax({url:"https://queue.fightforthefuture.org/action",type:"post",dataType:"json",data:a,success:function(a){userID=a.userID}}),trackLeaderboardStat({stat:"submit_form"}),this.trackOptimizely("send_email"),!0},trackOptimizely:function(a){return!1},showFinalWithCallInstructions:function(){$("#stepFinal .defaultText").hide(),$("#stepFinal .altText").show(),this.showFinal()},validatePhone:function(a){return a=a.replace(/\s/g,"").replace(/\(/g,"").replace(/\)/g,""),a=a.replace("+","").replace(/\-/g,""),"1"==a.charAt(0)&&(a=a.substr(1)),10!=a.length?!1:a},placePhonecall:function(a){$("#call").html("Calling...");var b={campaignId:"ifeelnaked",userPhone:a,fftfCampaign:"ifeelnaked",fftfReferer:host,fftfSession:session};this.zipcode&&(b.zipcode=this.zipcode),$.ajax({url:"https://call-congress.fightforthefuture.org/create",type:"get",dataType:"json",data:b,success:function(a){console.log("Placed call-congress call: ",a)}}),this.trackOptimizely("call_congress")},showFinal:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),$("#stepCall").css("opacity",0),setTimeout(function(){$("#step1").css("visibility","hidden"),$("#stepCall").css("visibility","hidden")},1e3),$("#stepFinal").show(),setTimeout(function(){$("#stepFinal").css("opacity",1)},10)},showPhoneCall:function(){$("#step1").addClass("hidden"),$("#header").addClass("hidden"),setTimeout(function(){$("#step1").css("visibility","hidden")},1e3),$("#stepCall").show(),setTimeout(function(){$("#stepCall").css("opacity",1)},10)},optimizelyTextAB:function(){return document.textVariation&&$("#"+document.textVariation).length?($(".cta_variant").hide(),void $("#"+document.textVariation).css("display","inline")):!1}}};$(document).ready(function(){var a=window.location.href;-1!=a.indexOf("EMBED")&&(document.body.className="embedded",-1!=a.indexOf("NOCALL")&&(animations.modal.options.skipCallTool=!0),-1!=a.indexOf("NOEMAIL")&&(animations.modal.options.skipEmailSignup=!0),-1!=a.indexOf("UNCHECK")&&(animations.modal.options.boxUnchecked=!0),-1!=a.indexOf("DP")&&(animations.modal.options.org="dp"),-1!=a.indexOf("FFF")&&(animations.modal.options.org="fftf"),animations.modal.options.fastAnimation=!0,animations.modal.start())});for(var ie10Styles=["msTouchAction","msWrapFlow","msWrapMargin","msWrapThrough","msOverflowStyle","msScrollChaining","msScrollLimit","msScrollLimitXMin","msScrollLimitYMin","msScrollLimitXMax","msScrollLimitYMax","msScrollRails","msScrollSnapPointsX","msScrollSnapPointsY","msScrollSnapType","msScrollSnapX","msScrollSnapY","msScrollTranslation","msFlexbox","msFlex","msFlexOrder"],ie11Styles=["msTextCombineHorizontal"],b=document.body,s=b.style,ieVersion=null,property,i=0;i<ie10Styles.length;i++)property=ie10Styles[i],void 0!=s[property]&&(ieVersion="ie10");for(var i=0;i<ie11Styles.length;i++)property=ie11Styles[i],void 0!=s[property]&&(ieVersion="ie11");ieVersion&&(document.getElementById("modal").className="IE",document.getElementById("header").className="IE");